function ajaxSync(n,t,i,r,u){typeof u=="undefined"&&(u="json");$.ajax({url:n,contentype:"charset=utf-8",dataType:u,data:t,cache:!0,async:!0,type:"POST",beforeSend:function(){},complete:function(){}}).done(i).fail(r)}function Language(n){var t=this;t.btnSearch=$(n.btnSearch);t.txtKeyword=$(n.txtKeyword);t.selServiceList=$(n.selServiceList);t.btnCreateLink=$(n.btnCreateLink);t.languageContainer=jQuery(n.languageContainer);t.currentPage=1;t.linePerPage=100;t.serviceList="";t.init=function(){t.getServiceList()};t.reset=function(){t.currentPage=1;t.linePerPage=100;t.languageListLayer.hide();t.languageCreateLayer.hide()};t.selServiceList.change(function(){t.getLanguageList()});t.btnSearch.click(function(){t.getLanguageList()});t.txtKeyword.autocomplete({delay:500,source:function(){t.getLanguageList()}});t.getServiceList=function(){var n=function(n){var r,i;if(n.rows.length===0)return null;for(r="",r+="<option value='' selected='selected'>\uc120 \ud0dd<\/option>",t.serviceList="{",i=0;i<n.rows.length;i++)r+='<option value="'+n.rows[i].serviceNo+'">'+n.rows[i].serviceName+"<\/option>",t.serviceList+=i!==n.rows.length-1?'"'+n.rows[i].serviceNo+'":"'+n.rows[i].serviceName+'",':'"'+n.rows[i].serviceNo+'":"'+n.rows[i].serviceName+'"';t.serviceList+="}";t.selServiceList.empty().append(r).trigger("create");n.error!==undefined&&panelAlertLayer(n.error,"error")},i=function(){alert("\uc624\ub958 \ubc1c\uc0dd","error")};ajaxSync("/Language/GetServiceList",{},n,i)};t.setGridParam=function(){var n={ServiceNo:t.selServiceList.val(),KeyName:t.txtKeyword.val()};t.languageContainer.jqGrid("setGridParam",{page:1,datatype:"json",postData:n}).trigger("reloadGrid")};t.getLanguageList=function(){var n,i={ServiceNo:t.selServiceList.val(),KeyName:t.txtKeyword.val()};t.languageContainer.jqGrid("setGridParam",{page:1,datatype:"json",postData:i}).trigger("reloadGrid");t.languageContainer.jqGrid({url:"/Language/GetLanguageList",postData:i,mtype:"POST",datatype:"json",colNames:["No","ServiceNo","key","en","zh_CN","zh_TW","ja","ru"],colModel:[{name:"languageNo",index:"LanguageNo",align:"center",width:40,editable:!0,editrules:{edithidden:!1},hidedlg:!0,hidden:!0},{name:"serviceNo",index:"ServiceNo",align:"center",width:40,editable:!0,edittype:"select",editoptions:{value:JSON.parse(t.serviceList)},hidedlg:!0,hidden:!0},{name:"key",index:"Key",align:"center",width:100,editable:!0,sortable:!0},{name:"en",index:"en",width:150,align:"left",editable:!0},{name:"zh_CN",index:"zh_CN",width:150,align:"left",editable:!0},{name:"zh_TW",index:"zh_TW",width:150,align:"left",editable:!0},{name:"ja",index:"ja",width:150,align:"left",editable:!0},{name:"ru",index:"ru",width:150,align:"left",editable:!0}],rowNum:t.linePerPage,autowidth:!0,height:800,rowList:[t.linePerPage,t.linePerPage*2,t.linePerPage*3],pager:"#languagePager",sortname:"Key",viewrecords:!0,sortorder:"desc",multiselect:!0,emptyrecords:"Empty data.",onSelectRow:function(i){if(i&&i!==n){var r=t.languageContainer.getRowData(i);t.languageContainer.jqGrid("restoreRow",n);t.languageContainer.jqGrid("editRow",i,!0);n=i}},ondblClickRow:function(n){$(this).jqGrid("editGridRow",n)},loadComplete:function(n){n.error!==undefined&&alert(n.error,"error")},jsonReader:{root:"rows",repeatitems:!1,page:"page",total:"total",records:"records"},editurl:"/Language/Manage",caption:"LanguageSet"});$.extend($.jgrid.edit,{bSubmit:"Save and Close",bCancel:"Cancel",width:650,recreateForm:!0,beforeShowForm:function(){$('<a href="#">Clear<span class="ui-icon ui-icon-document-b"><\/span><\/a>').click(function(){$(".ui-jqdialog input").val("");$(this).closest(".ui-dialog-content").dialog("close")}).addClass("fm-button ui-state-default ui-corner-all fm-button-icon-left").prependTo("#Act_Buttons>td.EditButton")}});$.extend($.jgrid.del,{bSubmit:"Delete",bCancel:"Cancel",recreateForm:!0,onclickSubmit:function(n,t){for(var f=$(this),r=t.split(","),u=[],i=0;i<r.length;i++)u.push(f.jqGrid("getRowData",r[i]).languageNo);return{languageNoList:JSON.stringify(u)}}});t.languageContainer.jqGrid("navGrid","#languagePager",{edit:!0,add:!0,del:!0,search:!1})}}$.ajaxSetup({cache:!0});$(document).ajaxError(function(n,t){console.log("ajaxError");console.log(t.status);t.status!==500&&t.status!==404?window.location.reload(!0):execScript(t.responseText)});$(document).keydown(function(n){if(n.target.nodeName!=="INPUT"&&n.target.nodeName!=="TEXTAREA"&&n.keyCode===8)return!1});$(document).keydown(function(n){if(n.target.nodeName!=="INPUT"&&n.target.nodeName!=="TEXTAREA"&&n.keyCode===8)return!1});